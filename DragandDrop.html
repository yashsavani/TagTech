<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
</head>
<body>
<div id="container"></div>
<script type="text/javascript" src="http://jindo.dev.naver.com/collie/deploy/collie.min.js"></script>
<script type="text/javascript">

collie.util.addEventListener(window, "load", function () {

    var layer = new collie.Layer({
        width: 480,
        height: 320
    });

    var oSelectedDisplayObject = null;
    var htStartPosition = {};
    var htSelectedDisplayObjectPosition = {};
    
    layer.attach({
        mousedown : function (oEvent) {
            if (oEvent.displayObject) {
                oEvent.displayObject.set({
                    scaleX : oEvent.displayObject.get("scale") * 1.2,
                    scaleY : oEvent.displayObject.get("scale") * 1.2
                });
                oSelectedDisplayObject = oEvent.displayObject;
                htStartPosition = {
                    x : oEvent.x,
                    y : oEvent.y 
                };
                htSelectedDisplayObjectPosition = {
                    x : oSelectedDisplayObject.get("x"),
                    y : oSelectedDisplayObject.get("y")
                };
            }
        },
        mouseup : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                oSelectedDisplayObject.set({
                    scaleX : oSelectedDisplayObject.get("scale"),
                    scaleY : oSelectedDisplayObject.get("scale")
                });
                oSelectedDisplayObject = null;
                htSelectedDisplayObjectPosition = htStartPosition = {};
                
                oLayer.removeChild(oEvent.displayObject);
                oLayer.addChild(oEvent.displayObject);
            }
        },
        mousemove : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                var x = htStartPosition.x - oEvent.x;
                var y = htStartPosition.y - oEvent.y;
                oSelectedDisplayObject.set({
                    x : htSelectedDisplayObjectPosition.x - x,
                    y : htSelectedDisplayObjectPosition.y - y
                });
            }
        }
    });

      
    collie.ImageManager.add ({
        rabbit: "http://jindo.dev.naver.com/collie/img/small/yame_walk.png"
    });
      
    var rabbit = new collie.DisplayObject({
        x: "center",
        y: "center",
        width: 129.4,
        height: 165,
        useEvent : true,
        backgroundImage: "rabbit", 
        scaleX : 1.0,
        scaleY : 1.0, 
        scale: 1.0
    }).addTo(layer);
      
    collie.Renderer.addLayer(layer);
    collie.Renderer.load(document.getElementById("container"));
    collie.Renderer.start();
});
</script>
</body>
</html>