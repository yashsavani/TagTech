<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
</head>
<body>
<div id="container"></div>
<script type="text/javascript" src="http://jindo.dev.naver.com/collie/deploy/collie.min.js"></script>
<script type="text/javascript">

collie.util.addEventListener(window, "load", function () {

    var layer = new collie.Layer({
        width: 800,
        height: 450
    });
	var hand = new collie.Layer({
        width: 800,
        height: 450
    });
	var character = new collie.Layer({
		width: 800,
		height: 450,
	});
	var frameLayer = new collie.Layer({
        width: 800,
        height: 450
    });

    var oSelectedDisplayObject = null;
    var htStartPosition = {};
    var htSelectedDisplayObjectPosition = {};
    
    hand.attach({
        mousedown : function (oEvent) {
            if (oEvent.displayObject) {
                oEvent.displayObject.set({
                    scaleX : oEvent.displayObject.get("scale") * 1.2,
                    scaleY : oEvent.displayObject.get("scale") * 1.2
                });
                oSelectedDisplayObject = oEvent.displayObject;
                htStartPosition = {
                    x : oEvent.x,
                    y : oEvent.y 
                };
                htSelectedDisplayObjectPosition = {
                    x : oSelectedDisplayObject.get("x"),
                    y : oSelectedDisplayObject.get("y")
                };
            }
        },
        mouseup : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                oSelectedDisplayObject.set({
                    scaleX : oSelectedDisplayObject.get("scale"),
                    scaleY : oSelectedDisplayObject.get("scale")
                });
                oSelectedDisplayObject = null;
                htSelectedDisplayObjectPosition = htStartPosition = {};
                
                hand.removeChild(oEvent.displayObject);
                hand.addChild(oEvent.displayObject);
            }
        }
        /*mousemove : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                var x = htStartPosition.x - oEvent.x;
                var y = htStartPosition.y - oEvent.y;
                oSelectedDisplayObject.set({
                    x : htSelectedDisplayObjectPosition.x - x,
                    y : htSelectedDisplayObjectPosition.y - y
                });
            }
        }*/
    });

	collie.ImageManager.add({
		handbackground: "C:/Users/Micah/TagTech/img/handbackground.png",
		actionbox1: "C:/Users/Micah/TagTech/img/actionbox.png",
		actionbox2: "C:/Users/Micah/TagTech/img/actionbox.png",
		actionbox3: "C:/Users/Micah/TagTech/img/actionbox.png",
		actionbox4: "C:/Users/Micah/TagTech/img/actionbox.png",
		mage: "C:/Users/Micah/TagTech/img/mage.png",
		warrior: "C:/Users/Micah/TagTech/img/warrior.png",
		warriorAttack: "C:/Users/Micah/TagTech/img/warrior.png",
		swordCard: "C:/Users/Micah/TagTech/img/swordCard.png",
		cardGlow: "C:/Users/Micah/TagTech/img/cargGlow.png",
		frame: "C:/Users/Micah/TagTech/img/backgroundframe.png"
	});

	var handbackground = new collie.DisplayObject({
		x: "center",
		width: 800,
		height: 450,
		backgroundImage: "handbackground"
	}).addTo(layer);
	var actionbox1 = new collie.DisplayObject({
		x: 110,
		width: 100,
		height: 100,
		backgroundImage: "actionbox1"
	}).bottom(300).addTo(layer);
	var actionbox2 = new collie.DisplayObject({
		x: 270,
		width: 100,
		height: 100,
		backgroundImage: "actionbox2"
	}).bottom(300).addTo(layer);
	var actionbox3 = new collie.DisplayObject({
		x: 430,
		width: 100,
		height: 100,
		backgroundImage: "actionbox3"
	}).bottom(300).addTo(layer);
	var actionbox4 = new collie.DisplayObject({
		x: 590,
		width: 100,
		height: 100,
		backgroundImage: "actionbox4"
	}).bottom(300).addTo(layer);
	/*var mage = new collie.DisplayObject({
		x: "center",
		width: 100.5,
		height: 138.1,
		backgroundImage: "mage"
	}).addTo(layer);*/
	var swordCard = new collie.DisplayObject({
		x: "center",
		width: 150,
		height: 200,
		useEvent : true,
        backgroundImage: "swordCard", 
        scaleX : 0.8,
        scaleY : 0.8, 
        scale: 0.8
	}).bottom(50).addTo(hand).attach({
		click : function () {
			/*if(cargGlow.get("visible") == false) {
				cardGlow.set("visible", true);
			} else {
				cardGlow.set("visible", false)
			}*/
		}
	});
	var cardGlow = new collie.DisplayObject({
		width: 170,
		height: 220,
		backgroundImage: "cardGlow"
		}).addTo(swordCard);
	});
	
	/*var warrior = new collie.DisplayObject({
		x: 50,
		y: 50,
		width: 130,
		height: 190
	}).addTo(character).attach({
		click : function () {
			if (!oTimerAttack.isPlaying()) {
				oTimer.stop();
				oTimerAttack.start();
			}
		}
	});
	var warriorStill = new collie.DisplayObject({
		x: 0,
		y: 0,
		width: 134,
		height: 190,
		backgroundImage: "warrior"
	}).addTo(warrior);
	var warriorAttack = new collie.DisplayObject({
		x:  0,
		width: 130,
		height: 190,
		backgroundImage: "warriorAttack"
	}).addTo(warrior);
	var oTimer = collie.Timer.cycle(warriorStill, "4fps", {
		from: 0,
        to : 2,
        loop : 0,
        onStart : function () {
            warriorStill.set("visible", true);
            warriorAttack.set("visible", false);
        }
    });
    var oTimerAttack = collie.Timer.cycle(warriorAttack, "10fps", {
        from : 0,
        to : 6,
        loop : 1,
        useAutoStart : false,
        onStart : function () {
            warriorStill.set("visible", false);
            warriorAttack.set("visible", true);
        },
        onComplete : function () {
            oTimer.start();
        }
    });*/
		
	var frame = new collie.DisplayObject({
		x: "center",
		width: 800,
		height: 450,
		backgroundImage: "frame"
	}).addTo(frameLayer);
	
	var currentY = swordCard.get("y");
	swordCard.attach({
		click: function (e) {
			collie.Timer.queue().
				transition(swordCard, 400, {
					to: currentY - 100,
					effect: collie.Effect.easeOut,
					set: "y"
				}).
				transition(swordCard, 400, {
					to: currentY,
					effect: collie.Effect.easeIn,
					set: "y"
				});
			
		}
	});

	collie.Renderer.addLayer(layer);
	collie.Renderer.addLayer(hand);
	collie.Renderer.addLayer(character);
	collie.Renderer.addLayer(frameLayer);
	collie.Renderer.load(document.getElementById("container"));
	collie.Renderer.start("30fps");
});
</script>
</body>
</html>