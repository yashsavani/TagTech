<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
</head>
<body>
<div id="container"></div>
<script type="text/javascript" src="http://jindo.dev.naver.com/collie/deploy/collie.min.js"></script>
<script type="text/javascript" src="http://jindo.dev.naver.com/collie/deploy/collie.addon.min.js"></script>
<script type="text/javascript">

collie.util.addEventListener(window, "load", function () {

    var layer = new collie.Layer({
        width: 800,
        height: 450
    });

    var hand = new collie.Layer({
        width: 800,
        height: 450
    });

    var oSelectedDisplayObject = null;
    var htStartPosition = {};
    var htSelectedDisplayObjectPosition = {};
    var sensor = new collie.Sensor({
        frequency : 0
    });

    hand.attach({
        mousedown : function (oEvent) {
            if (oEvent.displayObject) {
                oEvent.displayObject.set({
                    scaleX : oEvent.displayObject.get("scale") * 1.2,
                    scaleY : oEvent.displayObject.get("scale") * 1.2
                });
                oSelectedDisplayObject = oEvent.displayObject;
                htStartPosition = {
                    x : oEvent.x,
                    y : oEvent.y 
                };
                htSelectedDisplayObjectPosition = {
                    x : oSelectedDisplayObject.get("x"),
                    y : oSelectedDisplayObject.get("y")
                };
            }
        },
        mouseup : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                oSelectedDisplayObject.set({
                    scaleX : oSelectedDisplayObject.get("scale"),
                    scaleY : oSelectedDisplayObject.get("scale")
                });

                sensor.addListener(oSelectedDisplayObject, "card", function(a, b) {
                    a.set({
                        x : oEvent.x,
                        y : oEvent.y
                    });
                }, function (a, b) {
                    a.set({
                        x : b.x,
                        y : b.y
                    });
                });

                oSelectedDisplayObject = null;

                htSelectedDisplayObjectPosition = htStartPosition = {};
                
                hand.removeChild(oEvent.displayObject);
                hand.addChild(oEvent.displayObject);
            }
        },
        mousemove : function (oEvent) {
            if (oSelectedDisplayObject !== null) {
                var x = htStartPosition.x - oEvent.x;
                var y = htStartPosition.y - oEvent.y;
                oSelectedDisplayObject.set({
                    x : htSelectedDisplayObjectPosition.x - x,
                    y : htSelectedDisplayObjectPosition.y - y
                });
            }
        }
    });

    var folder = collie.Renderer.isRetinaDisplay() ? "large" : "small";

    collie.ImageManager.add({
        handbackground: "C:/Users/andre_000/Documents/GitHub/TagTech/img/handbackground.png",
        actionbox1: "C:/Users/andre_000/Documents/GitHub/TagTech/img/actionbox.png",
        //@@ -17,14 +76,7 @@
        mage: "C:/Users/andre_000/Documents/GitHub/TagTech/img/mage.png",
        swordcard: "C:/Users/andre_000/Documents/GitHub/TagTech/img/swordcard.png"
    });

    var handbackground = new collie.DisplayObject({
        x: "center",
        y: "center",
        width: 800,
        height: 450, 
        //@@ -82,6 +134,7 @@
        // effect: collie.Effect.easeIn,
        backgroundImage: "handbackground",
        set: "y",
        scaleX: 0.6, 
        scaleY: 0.6,
        scale: 0.6
    }).addTo(layer);

    var actionbox1 = new collie.DisplayObject({
        x: 100,
        y: 20,
        width: 100,
        height: 100, 
        backgroundImage: "actionbox1",
        scaleX: 0.6, 
        scaleY: 0.6,
        scale: 0.6
    }).addTo(layer);

    sensor.add(actionbox1, "card");

    var actionbox2 = new collie.DisplayObject({
        x: 270,
        y: 20,
        width: 100,
        height: 100,
        scaleX: 0.6, 
        scaleY: 0.6,
        scale: 0.6, 
        backgroundImage: "actionbox1",
    }).addTo(layer);

    var actionbox3 = new collie.DisplayObject({
        x: 440,
        y: 20,
        width: 100,
        height: 100, 
        backgroundImage: "actionbox1",
        scaleX: 0.6, 
        scaleY: 0.6,
        scale: 0.6
    }).addTo(layer);

    var actionbox4 = new collie.DisplayObject({
        x: 610,
        y: 20,
        width: 100,
        height: 100, 
        backgroundImage: "actionbox1",
        scaleX: 0.6, 
        scaleY: 0.6,
        scale: 0.6
    }).addTo(layer);

for(var i = 0; i < 7; i++) {
    var sword_card = new collie.DisplayObject({
        x: "center",
        y: "center",
        width: 150,
        height: 200,
        useEvent : true,
        backgroundImage: "swordcard", 
        scaleX : 0.6,
        scaleY : 0.6, 
        scale: 0.6
    }).addTo(hand);
}
    sensor.start();

    collie.Renderer.addLayer(layer);
    collie.Renderer.addLayer(hand);
    collie.Renderer.load(document.getElementById("container"));
    collie.Renderer.start();
});
</script>
</body>
</html>